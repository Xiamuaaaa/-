
## 实验四 字符串实验
### 一、实验目的
* 掌握字符串String及其方法的使用
* 掌握异常处理结构

### 二、实验要求
利用已学的字符串处理知识编程完成《长恨歌》古诗的整理对齐工作，
写出功能函数，并运行。达到如下功能：

* 1.每`7`个汉字加入一个标点符号，奇数时加`，`，偶数时加`。`
* 2.允许提供输入参数，统计古诗中某个字或词出现的次数
* 3.考虑操作中可能出现的异常，在程序中设计异常处理程序

### 三、实验过程
* 1.打开Eclipse软件，新建Project名为Poem，再在包Package中新建class名为Changhenge。
* 2.首先定义字符串类String poem将长恨歌内容添加到字符串中。
* 3.定义char[]数组poems，并将poem对象中的字符转换为一个字符数组。
* 4.定义StringBuffer类s并进行声明。
* 5.利用for循环计算关键字出现的次数，初始化时i=0,长度设置为i < poems.length-1，i++，
当(i+1)%7等于0并且i为奇数时，【用append()方法】在结尾加“，”， 
当(i+1)%7等于0并且i为偶数时，【用append()方法】结尾加“。”。
* 6.打印标题《长恨歌》，用System.out.println(s.toString());将诗歌内容按照上述规定要求输出。
* 7.添加一个参数countString用来计算诗歌某个字或者某个词出现的次数。

### 四、核心代码和注释
```javascript
try{//异常处理
		char[] poems = poem.toCharArray();	
		/*将字符串对象中的字符转换为一个字符数组,每个字符的ASC码与字符T的ASC码进行二进制异或运算。
最后把结果转换回字符。*/
		StringBuffer s = new StringBuffer();
		// 追加内容到当前StringBuffer对象的末尾
        // 计算字符串中关键字出现的次数	
        for (int i = 0; i < poems.length-1; i++) {			// 在被选元素的结尾插入符号
			s.append(poems[i]);
			if ((i+1) % 7 == 0 && (i+1) % 2 == 1 || (i+1) % 14 == 0 && (i+1) % 2 == 0) {
				// i+1%7等于0并且i为奇数时，在结尾加，
				if ((i+1) % 7 == 0 && (i+1) % 2 == 1)
					s.append(",");
				// i+1%14等于0并且i为偶数时，在结尾加。
				else 
					s.append("。\n");
			}
		}
		System.out.println("《长恨歌》");    //添加标题
		System.out.println(" ");
		System.out.println(s.toString());    //将数组内容按要求显示出来
		countString(poem, "王");             //显示“王”字出现的次数
	}
		catch(Exception   e){      //异常处理
			System.out.print("发生异常"+e.toString());
			e.printStackTrace();
		}
	
}       //countString   显示次数的方法
	private static void countString(String poem, String index) {
		// TODO Auto-generated method stub
		int count = 0;     //初始值为0
		while (poem.indexOf(index) != -1) {
			// 查找字串中指定字符首次出现的位置
			// 返回一个新字符串，它是此字符串的一个子字符串。
			poem = poem.substring(poem.indexOf(index) + 1, poem.length());
			count++;
		}
		System.out.println(index + "  字一共出现:" + count + "次");     
	}
```
### 五、系统运行结果
《长恨歌》
 
* 汉皇重色思倾国,御宇多年求不得。
* 杨家有女初长成,养在深闺人未识。
* 天生丽质难自弃,一朝选在君王侧。
* 回眸一笑百媚生,六宫粉黛无颜色。
* 春寒赐浴华清池,温泉水滑洗凝脂。
* 侍儿扶起娇无力,始是新承恩泽时。
* 云鬓花颜金步摇,芙蓉帐暖度春宵。
* 春宵苦短日高起,从此君王不早朝。
* 承欢侍宴无闲暇,春从春游夜专夜。
* 后宫佳丽三千人,三千宠爱在一身。
* 金屋妆成娇侍夜,玉楼宴罢醉和春。
* 姊妹弟兄皆列土,可怜光彩生门户。
* 遂令天下父母心,不重生男重生女。
* 骊宫高处入青云,仙乐风飘处处闻。
* 缓歌慢舞凝丝竹,尽日君王看不足。
* 渔阳鼙鼓动地来,惊破霓裳羽衣曲。
* 九重城阙烟尘生,千乘万骑西南行。
* 翠华摇摇行复止,西出都门百余里。
* 六军不发无奈何,宛转蛾眉马前死。
* 花钿委地无人收,翠翘金雀玉搔头。
* 君王掩面救不得,回看血泪相和流。
* 黄埃散漫风萧索,云栈萦纡登剑阁。
* 峨嵋山下少人行,旌旗无光日色薄。
* 蜀江水碧蜀山青,圣主朝朝暮暮情。
* 行宫见月伤心色,夜雨闻铃肠断声。
* 天旋地转回龙驭,到此踌躇不能去。
* 马嵬坡下泥土中,不见玉颜空死处。
* 君臣相顾尽沾衣,东望都门信马归。
* 归来池苑皆依旧,太液芙蓉未央柳。
* 芙蓉如面柳如眉,对此如何不泪垂。
* 春风桃李花开夜,秋雨梧桐叶落时。
* 西宫南苑多秋草,落叶满阶红不扫。
* 梨园弟子白发新,椒房阿监青娥老。
* 夕殿萤飞思悄然,孤灯挑尽未成眠。
* 迟迟钟鼓初长夜,耿耿星河欲曙天。
* 鸳鸯瓦冷霜华重,翡翠衾寒谁与共。
* 悠悠生死别经年,魂魄不曾来入梦。
* 临邛道士鸿都客,能以精诚致魂魄。
* 为感君王辗转思,遂教方士殷勤觅。
* 排空驭气奔如电,升天入地求之遍。
* 上穷碧落下黄泉,两处茫茫皆不见。
* 忽闻海上有仙山,山在虚无缥渺间。
* 楼阁玲珑五云起,其中绰约多仙子。
* 中有一人字太真,雪肤花貌参差是。
* 金阙西厢叩玉扃,转教小玉报双成。
* 闻道汉家天子使,九华帐里梦魂惊。
* 揽衣推枕起徘徊,珠箔银屏迤逦开。
* 云鬓半偏新睡觉,花冠不整下堂来。
* 风吹仙袂飘飖举,犹似霓裳羽衣舞。
* 玉容寂寞泪阑干,梨花一枝春带雨。
* 含情凝睇谢君王,一别音容两渺茫。
* 昭阳殿里恩爱绝,蓬莱宫中日月长。
* 回头下望人寰处,不见长安见尘雾。
* 惟将旧物表深情,钿合金钗寄将去。
* 钗留一股合一扇,钗擘黄金合分钿。
* 但教心似金钿坚,天上人间会相见。
* 临别殷勤重寄词,词中有誓两心知。
* 七月七日长生殿,夜半无人私语时。
* 在天愿作比翼鸟,在地愿为连理枝。
* 天长地久有时尽,此恨绵绵无绝期。
  
王  字一共出现:6次

### 六、实验心得
* 在做整个字符串实验的过程中，遇到了许多困难，例如如何进行for循环才能使句号和逗号
按要求隔开。还有就是第一个汉字显示不出来，下标不对应的情况等等。但在老师和同学的帮
助下这些问题都得到了解决，在这过程中，也使我受益匪浅。让我更加熟练地运用StringBuffer
方法。也知道了在这里for循环更好的优势，对for循环有了更加深刻的理解。通过这一次的实验
使我对Java理解与运用更佳熟练。也会让自己变得更好。
